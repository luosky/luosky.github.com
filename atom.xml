<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title><![CDATA[Luosky's Playground]]></title>
  <link href="http://luosky.github.com/atom.xml" rel="self"/>
  <link href="http://luosky.github.com/"/>
  <updated>2012-07-19T20:57:13+08:00</updated>
  <id>http://luosky.github.com/</id>
  <author>
    <name><![CDATA[Luosky]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
    <entry>
      




<title type="html"><![CDATA[PassKit (PassBook api) 学习笔记]]></title>
<link href="http://luosky.github.com/2012/06/21/passkit-passbook-api-study-notes/"/>
<updated>2012-06-21T21:40:00+08:00</updated>
<id>http://luosky.github.com/2012/06/21/passkit-passbook-api-study-notes</id>

      <content type="html"><![CDATA[<h2>PassKit 学习笔记</h2>

<p>PassBook里存放的是一个个电子凭证(pass),这些pass可以是兑换券,机票,门票等,这些pass可以通过各种第三方app,网站,或者email进行安装. PassBook本身不提供这些pass,只是提供了一个查看这些pass,以及接受pass更新的平台. PassKit则是这个平台开放的API.</p>

<h3>pass的安装方式</h3>

<ol>
<li>通过网站下载 (MIME type: application/vnd-com.apple.pkpass)</li>
<li>通过email下载</li>
<li>通过提供pass的app安装</li>
</ol>


<h3>pass type identifier</h3>

<p>必须在developer.apple.com里注册自己pass type identifier</p>

<h3>pass的类型</h3>

<ul>
<li>boardingPass</li>
<li>coupon</li>
<li>eventTicket</li>
<li>storeCard  余额卡,必须指定余额值</li>
<li>generic</li>
</ul>


<h3>pass的提醒方式</h3>

<p><strong>预先指定的提醒:</strong></p>

<ul>
<li>时间 &#8211;当时间接近时可在锁屏界面提醒用户相关信息</li>
<li>地点 &#8211;当用户接近指定地点时提醒用户相关信息(指定地点最多只能指定10个)</li>
</ul>


<p>预先指定的提醒在发布到用户的PassBook后仍可以随时被修改.</p>

<p><strong>实时提醒:</strong></p>

<ul>
<li>当pass信息需要更改时,可通过推送通知用户,界面上可展示相应的修改信息. (除了pass的类型和序列号,其他字段都可以随时修改)</li>
</ul>


<h3>pass的样式</h3>

<h4>颜色:</h4>

<p><img src="http://luosky.github.com/images/blog/2012-06-21-passkit-passbook-api-xue-xi-bi-ji/color.jpg" alt="image" /></p>

<h5>样式:</h5>

<p>store card &amp; coupon:</p>

<p><img src="http://luosky.github.com/images/blog/2012-06-21-passkit-passbook-api-xue-xi-bi-ji/logo_bg_storecard.png" alt="image" /></p>

<p>event :</p>

<p><img src="http://luosky.github.com/images/blog/2012-06-21-passkit-passbook-api-xue-xi-bi-ji/logo_bg_event.png" alt="image" /></p>

<h3>pass的字段</h3>

<p><img src="http://luosky.github.com/images/blog/2012-06-21-passkit-passbook-api-xue-xi-bi-ji/fields.jpeg" alt="image" /></p>

<ul>
<li>serialNumber用来标识pass,同样的pass type identifier 下不能有两个pass的serialNumber相同</li>
<li>只有发布时指定了验证地址和验证token的pass才能在发布后进行修改(这个token只是用来验证pass本身可以接收更新,和设备是没有关系的)</li>
<li>webServiceURL token的验证地址,指向用户自己实现的rest服务器,必须实现更新pass所需的各种接口,必须是https…</li>
<li>relevantDate 提醒用户的时间. 具体显示提醒的时间范围由pass类型决定</li>
<li>locations 提醒用户的地址.范围大小由pass类型决定</li>
<li><p>显示App Store item :
<code>
"associatedStoreIdentifiers" : [ 375380948 ]
</code></p>

<h3>注意点</h3></li>
<li><p>iPad上没有Passbook</p></li>
<li>导出P12时不用选中私钥</li>
<li>签名和打包pass可用wwdc示例代码提供的签名工具</li>
<li>BARCODE不支持中文(应该跟用的编码有关)</li>
<li>日期格式: 2012-06-20T17:30+08:00</li>
<li>使用相对时间的格式  &#8220;isRelative&#8221; : true</li>
<li>coupon的primaryFields很大,中文只能放3个字</li>
<li>PKPassLibrary不是singleton,注册PKPassLibraryDidChangeNotification通知时,通知是针对某个具体的library对象的,所以需将你创建的library传过去.</li>
</ul>


<figure class='code'><div class='highlight'><table><td class='gutter'><pre class='line-numbers'><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'>    <span class="p">[</span><span class="n">noteCenter</span> <span class="nl">addObserver:</span><span class="n">self</span>
</span><span class='line'>                   <span class="nl">selector:</span><span class="k">@selector</span><span class="p">(</span><span class="n">passLibraryDidChange</span><span class="p">)</span>
</span><span class='line'>                       <span class="nl">name:</span><span class="n">PKPassLibraryDidChangeNotification</span>
</span><span class='line'>                     <span class="nl">object:</span><span class="n">self</span><span class="p">.</span><span class="n">library</span><span class="p">];</span>
</span></code></pre></td></tr></table></div></figure>


<p>附上自己写的 <a href="http://luosky.github.com/images/blog/2012-06-21-passkit-passbook-api-xue-xi-bi-ji/passkit_project.zip">pass工程</a>  (你可能需要换成自己开发者账号签名的pass才能在pass列表中查看已安装的pass,添加pass的话则不需要)</p>
<p><a rel="bookmark" href="http://luosky.github.com/2012/06/21/passkit-passbook-api-study-notes/">&#9875; Permalink</a></p>]]></content>
    </entry>
  
    <entry>
      




<title type="html"><![CDATA[家庭无线音乐方案]]></title>
<link href="http://luosky.github.com/2012/05/10/wireless-music-solution/"/>
<updated>2012-05-10T00:36:00+08:00</updated>
<id>http://luosky.github.com/2012/05/10/wireless-music-solution</id>

      <content type="html"><![CDATA[<ul>
<li><p>AirPlay</p>

<ul>
<li><p>优点:</p>

<ul>
<li>有了苹果的推广,前景有不小的想象空间</li>
<li>支持视频</li>
</ul>
</li>
<li><p>缺点:</p>

<ul>
<li>需要一个master设备来输出多媒体数据,一个slave设备来展现多媒体</li>
<li>目前只能一对一</li>
</ul>
</li>
<li><p>入门体验:</p>

<ul>
<li>正道:买个Airport Express,既可以用作无线路由器,插在离音箱近的地方用音频线连接音响即可无线播放音乐了</li>
<li>歪道:使用破解了AirPlay密钥的开源方案,如Shairport,将电脑变成AirPlay的音频输出端.</li>
</ul>
</li>
</ul>
</li>
<li><p>Sonos</p>

<ul>
<li>优点:支持多个输出点,如果你需要多个房间无线同步播放音乐,Sonos适合你</li>
<li><p>缺点:</p>

<ul>
<li>相比AirPlay来讲,前景没那么乐观</li>
<li>入门价格较贵</li>
</ul>
</li>
</ul>
</li>
</ul>

<p><a rel="bookmark" href="http://luosky.github.com/2012/05/10/wireless-music-solution/">&#9875; Permalink</a></p>]]></content>
    </entry>
  
    <entry>
      




<title type="html"><![CDATA[程序员的福音]]></title>
<link href="http://luosky.github.com/2012/03/23/programmer-saver/"/>
<updated>2012-03-23T00:36:00+08:00</updated>
<id>http://luosky.github.com/2012/03/23/programmer-saver</id>

      <content type="html"><![CDATA[<p><a href="http://www.classnamer.com/"><img class="" src="http://luosky.com/wp-content/uploads/2012/03/Screen-Shot-2012-03-23-at-下午1.38.45-494x249.png" title="(classnamer)" ></a></p>

<p>以后不知道取什么名字的时候就来<a href="http://www.classnamer.com/">这网站</a>捞一个</p>

<p>btw,图中这个类名碉堡了</p>
<p><a rel="bookmark" href="http://luosky.github.com/2012/03/23/programmer-saver/">&#9875; Permalink</a></p>]]></content>
    </entry>
  
    <entry>
      




<title type="html"><![CDATA[第一次处理Github的Pull Request]]></title>
<link href="http://luosky.github.com/2012/03/23/first-time-handle-pull-request-on-github/"/>
<updated>2012-03-23T00:36:00+08:00</updated>
<id>http://luosky.github.com/2012/03/23/first-time-handle-pull-request-on-github</id>

      <content type="html"><![CDATA[<p><img class="" src="http://luosky.com/wp-content/uploads/2012/03/Screen-Shot-2012-03-23-at-下午5.15.34-494x338.png" title="(merge pull request)" ></p>

<p>第一次处理Github的Pull Request,还是<a href="https://github.com/CocoaPods/CocoaPods">CocoaPods</a>这样的项目,要点Merge pull request时不禁有点手抖…</p>

<p><img class="" src="http://luosky.com/wp-content/uploads/2012/03/4D08QFI206-494x187.jpg" title="(merge)" ></p>

<p>算是对<a href="https://github.com/CocoaPods/CocoaPods">CocoaPods</a>做了点小贡献.</p>

<p>============== 我是分隔线 ==============</p>

<p><a href="https://github.com/CocoaPods/CocoaPods">CocoaPods</a>很活跃, 我的pull request提交没多久, 管理员就提了<a href="https://github.com/CocoaPods/Specs/pull/78#issuecomment-4656168">修改建议</a>,并且把我加入到了成员组里,同时还有另外一个人也提了别的<a href="https://github.com/CocoaPods/Specs/pull/78#issuecomment-4656168">建议</a>.</p>

<p>关注了这个框架挺久了, 因为改动太大,之前一直不敢用. 现在算是已经挺成熟的了,这几天正在把<a href="http://itunes.apple.com/cn/app/id408827748?mt=8#">爱折客</a>换成用它来管理用到的组件.强烈推荐iOS和 Mac开发者也试试,要升级你用到的组件的版本真的非常方便.</p>
<p><a rel="bookmark" href="http://luosky.github.com/2012/03/23/first-time-handle-pull-request-on-github/">&#9875; Permalink</a></p>]]></content>
    </entry>
  
    <entry>
      




<title type="html"><![CDATA[iOS模拟器居然还可以监测出来Mac上正在facetime,做得也太细致了]]></title>
<link href="http://luosky.github.com/2012/02/27/amazing-ios-simulator/"/>
<updated>2012-02-27T00:36:00+08:00</updated>
<id>http://luosky.github.com/2012/02/27/amazing-ios-simulator</id>

      <content type="html"><![CDATA[<p><img class="" src="http://photo.luosky.com/wp-content/uploads/2012/02/Screen-Shot-2012-02-27-at-下午8.36.15-262x494.png" title="iOS" ></p>
<p><a rel="bookmark" href="http://luosky.github.com/2012/02/27/amazing-ios-simulator/">&#9875; Permalink</a></p>]]></content>
    </entry>
  
    <entry>
      




<title type="html"><![CDATA[First Week on Xcode ]]></title>
<link href="http://luosky.github.com/2011/04/03/first-week-on-xcode-4/"/>
<updated>2011-04-03T00:36:00+08:00</updated>
<id>http://luosky.github.com/2011/04/03/first-week-on-xcode-4</id>

      <content type="html"><![CDATA[<p>经历了上周的one week on rails,这周又切换回iOS了.自从更新了Xcode 4之后,就跑去做支付宝连接和学习Ruby on Rails去了,一直没有碰Xcode.</p>

<p>Xcode 4相比Xcode 3变化好大,这一周花了N多时间在熟悉和折腾Xcode 4上.</p>

<p>Xcode 4亮点很多,比如Interface Builder现在和Xcode整合在一起了,创建outlet只要拖动到代码里就搞定了,非常方便,让我不禁又重回xib的怀抱.还有其他不少改进.</p>

<p>相关的文章已经很多了.这里就仅记录下碰到的问题,方便后来者:</p>

<h3>无法自动补全 / 没有语法高亮 的问题:</h3>

<p>在build settings里将precompile prefix header设为NO,删掉Derived Data目录(在Organizer里可以找到),等index完之后再看看</p>

<h3>打开static library时出现 &#8220;workspace integrity&#8221;错误:</h3>

<p>这一般是在打开了引用这个static library的项目的情况下打开这个static library项目导致的.关掉那个项目的xcode窗口即可.</p>

<h3>按照文档创建workspace后将static library项目拖进workspace结果只是认成是一个文件的问题:</h3>

<p>同上.因为这个static library 项目已经在别的xcode窗口中打开了.</p>

<h3>带有static library的项目找不到lib的问题:</h3>

<p>检查static library项目和主项目的building setting是否一致.比如主项目的building setting用的是自建的Distribution而不是Release,那么在static library里也得有这个Distribution名字的setting(并且由于前面的workspace integrity问题当时还没解决,无法打开该library项目,使得这个问题花了我n多时间才解决)</p>

<h3>带有static library的项目用Organizer提交到app store时无法verify/share/submit的问题:</h3>

<p>在static library的building settings里将skip install设为YES</p>
<p><a rel="bookmark" href="http://luosky.github.com/2011/04/03/first-week-on-xcode-4/">&#9875; Permalink</a></p>]]></content>
    </entry>
  
    <entry>
      




<title type="html"><![CDATA[Mary and Max]]></title>
<link href="http://luosky.github.com/2011/01/15/mary-and-max/"/>
<updated>2011-01-15T00:36:00+08:00</updated>
<id>http://luosky.github.com/2011/01/15/mary-and-max</id>

      <content type="html"><![CDATA[<p><img src="http://luosky.com/wp-content/uploads/2011/01/s4034827.jpg" title="s4034827" alt="" /></p>

<p>@caoxg 推荐的治愈系电影,周六的午后边吃着披萨,边把它看完了.虽然疗的不是我的伤,看了还是感觉很温暖.五星级.</p>

<h3>Quotes:</h3>

<p><img class="right" src="http://luosky.com/wp-content/uploads/2011/01/p496809861-300x168.jpg"></p>

<blockquote><p>When I was young, I wanted to be anybody but myself.</p><footer><strong>Max</strong> <cite>Mary and Max</cite></footer></blockquote>


<p></p>

<p><img class="right" src="http://luosky.com/wp-content/uploads/2011/01/p589868900-300x166.jpg">
<img class="right" src="http://luosky.com/wp-content/uploads/2011/01/p589869194-300x166.jpg"></p>

<blockquote><p>Love yourself first.</p><footer><strong>Max</strong> <cite>Mary and Max</cite></footer></blockquote>


<p></p>

<blockquote><p>Whatever will be , will be.</p><footer><strong>Max</strong> <cite>Mary and Max</cite></footer></blockquote>


<h3>最后Max给Mary的信的全文:</h3>

<blockquote><p>Dear Mary</p><p>Please find enclosed my entire Noblet collection as a sign that I forgive you.</p><p>When I received your book, the emotions inside my brain felt like they were in a tumble dryer, smashing into each other. The hurt felt like when I accidentally stapled my lips together. </p><p>The reason I forgive you is because you are not perfect.   <br/>You are imperfect and so am I.   <br/>All humans are imperfect, even the men outside my apartment who litters. </p><p>When I was young, I wanted to be anybody but myself.   <br/>Dr. Bernard Hazelhof said if I was on a desert island then I would have to get used to my own company, just me and the coconuts. He said I would have to accept myself, my warts and all, and that we don&#8217;t get to choose our warts. They are a part of us and we have to live with them.   </p><p>We can, however, choose our friends and I am glad I have chosen you.</p><p>Dr. Bernard Hazelhof also said that everyone&#8217;s lives are like a very long sidewalk. Some are well paved. Others, like mine, have cracks, banana skins and cigarette butts. Your sidewalk is like mine but probably not as many cracks. Hopefully, one day, our sidewalk will meet and we can share a can of condensed milk. </p><p>You are my best friends.   <br/>You are my only friend.</p><p>Your American penpal, Max Jerry Horowitz.</p><footer><strong>Max</strong> <cite>Mary and Max</cite></footer></blockquote>

<p><a rel="bookmark" href="http://luosky.github.com/2011/01/15/mary-and-max/">&#9875; Permalink</a></p>]]></content>
    </entry>
  
    <entry>
      




<title type="html"><![CDATA[我的第二个iOS应用 爱折客 更新了]]></title>
<link href="http://luosky.github.com/2011/01/06/my-second-ios-app/"/>
<updated>2011-01-06T00:36:00+08:00</updated>
<id>http://luosky.github.com/2011/01/06/my-second-ios-app</id>

      <content type="html"><![CDATA[<p>我做的第二个iOS应用[爱折客][]更新了,上海地区的iPhone用户欢迎试用:</p>

<p><a href="http://photo.luosky.com/wp-content/uploads/2011/01/Default.png"><img src="http://photo.luosky.com/wp-content/uploads/2011/01/Default.png" title="Default" alt="" /></a></p>

<h3>显示你附近的优惠券:</h3>

<p><img src="http://a1.phobos.apple.com/us/r1000/002/Purple/58/00/1e/mzl.yzjshxuf.320x480-75.jpg" title="附近" alt="" /></p>

<h3>优惠券页面:</h3>

<p><img src="http://a1.phobos.apple.com/us/r1000/040/Purple/61/c0/b0/mzl.yxnuejnc.320x480-75.jpg" title="优惠券" alt="" /></p>

<h3>你关注的店的动态:</h3>

<p><img src="http://a1.phobos.apple.com/us/r1000/036/Purple/73/64/ff/mzl.dqxvrrxb.320x480-75.jpg" title="我的店" alt="" /></p>

<h3>放入口袋的优惠券:</h3>

<p><img src="http://a1.phobos.apple.com/us/r1000/044/Purple/58/9f/6d/mzl.jlaqcrzy.320x480-75.jpg" title="口袋" alt="" /></p>

<h3>评论箱:</h3>

<p><img src="http://a1.phobos.apple.com/us/r1000/056/Purple/6e/39/ee/mzl.yvnvogck.320x480-75.jpg" title="评论箱" alt="" /></p>
<p><a rel="bookmark" href="http://luosky.github.com/2011/01/06/my-second-ios-app/">&#9875; Permalink</a></p>]]></content>
    </entry>
  
    <entry>
      




<title type="html"><![CDATA[iOS app内发送短信]]></title>
<link href="http://luosky.github.com/2011/01/04/ios-in-app-sms/"/>
<updated>2011-01-04T00:36:00+08:00</updated>
<id>http://luosky.github.com/2011/01/04/ios-in-app-sms</id>

      <content type="html"><![CDATA[<p>iOS4.0新加入了<code>MFMessageComposeViewController</code>和<code>MFMessageComposeViewControllerDelegate</code>,提供了发送短信的接口,可以像发送邮件那样不用跳出程序来发送短信. 介绍可参阅Message UI Framework Reference</p>

<p>一些笔记:</p>

<h3>MFMessageComposeViewController</h3>

<ul>
<li>提供了操作界面</li>
<li>使用前必须检查canSendText方法,若返回NO则不应将这个controller展现出来,而应该提示用户不支持发送短信功能.</li>
<li>界面不能自行定制</li>
<li>要发送的短信的内容(body)和收件人(recipients)在展现这个controller前需初始化好,展现了之后短信内容不能通过程序来进行修改.不过用户仍然可以手工修改短信内容和选择收件人</li>
<li>用户点了发送或者取消,或者发送失败时,MFMessageComposeViewControllerDelegate 的- messageComposeViewController:didFinishWithResult:方法都能得到通知,在这里进行相应的处理</li>
</ul>


<p>若在iOS3.0上运行的话,会提示<code>dyld: Symbol not found: _OBJC_CLASS_$_MFMessageComposeViewController</code> 解决方案:</p>

<ol>
<li>MessageUI.framework的引入类型应选择weak(在target -> Get Info -> General -> Linked Libraries -> MessageUI.framework -> Type 里修改)</li>
<li>不要在.h文件里直接import MessageUI/MFMessageComposeViewController.h,改为import &lt;MessageUI/MessageUI.h></li>
</ol>


<p>具体的发送代码:</p>

<figure class='code'><div class='highlight'><table><td class='gutter'><pre class='line-numbers'><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
</pre></td><td class='code'><pre><code class='objective-c'><span class='line'><span class="cp">    </span>
</span><span class='line'><span class="cp">    #pragma mark -</span>
</span><span class='line'><span class="cp">    #pragma mark SMS</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">-</span><span class="p">(</span><span class="kt">IBAction</span><span class="p">)</span><span class="nl">showSMSPicker:</span><span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="n">sender</span> <span class="p">{</span>
</span><span class='line'>      <span class="c1">// The MFMessageComposeViewController class is only available in iPhone OS 4.0 or later.</span>
</span><span class='line'>      <span class="c1">// So, we must verify the existence of the above class and log an error message for devices</span>
</span><span class='line'>      <span class="c1">//     running earlier versions of the iPhone OS. Set feedbackMsg if device doesn&#39;t support</span>
</span><span class='line'>      <span class="c1">//     MFMessageComposeViewController API.</span>
</span><span class='line'>      <span class="n">Class</span> <span class="n">messageClass</span> <span class="o">=</span> <span class="p">(</span><span class="n">NSClassFromString</span><span class="p">(</span><span class="s">@&quot;MFMessageComposeViewController&quot;</span><span class="p">));</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">if</span> <span class="p">(</span><span class="n">messageClass</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span> <span class="p">{</span>
</span><span class='line'>          <span class="c1">// Check whether the current device is configured for sending SMS messages</span>
</span><span class='line'>          <span class="k">if</span> <span class="p">([</span><span class="n">messageClass</span> <span class="n">canSendText</span><span class="p">])</span> <span class="p">{</span>
</span><span class='line'>              <span class="p">[</span><span class="n">self</span> <span class="n">displaySMSComposerSheet</span><span class="p">];</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>          <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>              <span class="p">[</span><span class="n">UIAlertView</span> <span class="nl">quickAlertWithTitle:</span><span class="s">@&quot;设备没有短信功能&quot;</span> <span class="nl">messageTitle:</span><span class="nb">nil</span> <span class="nl">dismissTitle:</span><span class="s">@&quot;关闭&quot;</span><span class="p">];</span>
</span><span class='line'>          <span class="p">}</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>          <span class="p">[</span><span class="n">UIAlertView</span> <span class="nl">quickAlertWithTitle:</span><span class="s">@&quot;iOS版本过低,iOS4.0以上才支持程序内发送短信&quot;</span> <span class="nl">messageTitle:</span><span class="nb">nil</span> <span class="nl">dismissTitle:</span><span class="s">@&quot;关闭&quot;</span><span class="p">];</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">-</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">displaySMSComposerSheet</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>      <span class="n">MFMessageComposeViewController</span> <span class="o">*</span><span class="n">picker</span> <span class="o">=</span> <span class="p">[[</span><span class="n">MFMessageComposeViewController</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
</span><span class='line'>      <span class="n">picker</span><span class="p">.</span><span class="n">messageComposeDelegate</span> <span class="o">=</span> <span class="n">self</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">NSMutableString</span><span class="o">*</span> <span class="n">absUrl</span> <span class="o">=</span> <span class="p">[[</span><span class="n">NSMutableString</span> <span class="n">alloc</span><span class="p">]</span> <span class="nl">initWithString:</span><span class="n">web</span><span class="p">.</span><span class="n">request</span><span class="p">.</span><span class="n">URL</span><span class="p">.</span><span class="n">absoluteString</span><span class="p">];</span>
</span><span class='line'>      <span class="p">[</span><span class="n">absUrl</span> <span class="nl">replaceOccurrencesOfString:</span><span class="s">@&quot;http://i.aizheke.com&quot;</span> <span class="nl">withString:</span><span class="s">@&quot;http://m.aizheke.com&quot;</span> <span class="nl">options:</span><span class="n">NSCaseInsensitiveSearch</span> <span class="nl">range:</span><span class="n">NSMakeRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">[</span><span class="n">absUrl</span> <span class="n">length</span><span class="p">])];</span>
</span><span class='line'>
</span><span class='line'>      <span class="n">picker</span><span class="p">.</span><span class="n">body</span><span class="o">=</span><span class="p">[</span><span class="n">NSString</span> <span class="nl">stringWithFormat:</span><span class="s">@&quot;我在爱折客上看到：%@ 可能对你有用，推荐给你！link：%@&quot;</span>
</span><span class='line'>                                          <span class="p">,[</span><span class="n">web</span> <span class="nl">stringByEvaluatingJavaScriptFromString:</span><span class="s">@&quot;document.title&quot;</span><span class="p">]</span>
</span><span class='line'>                                          <span class="p">,</span><span class="n">absUrl</span><span class="p">];</span>
</span><span class='line'>      <span class="p">[</span><span class="n">absUrl</span> <span class="n">release</span><span class="p">];</span>
</span><span class='line'>      <span class="p">[</span><span class="n">self</span> <span class="nl">presentModalViewController:</span><span class="n">picker</span> <span class="nl">animated:</span><span class="n">YES</span><span class="p">];</span>
</span><span class='line'>      <span class="p">[</span><span class="n">picker</span> <span class="n">release</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nl">messageComposeViewController:</span><span class="p">(</span><span class="n">MFMessageComposeViewController</span> <span class="o">*</span><span class="p">)</span><span class="n">controller</span>
</span><span class='line'>                   <span class="nl">didFinishWithResult:</span><span class="p">(</span><span class="n">MessageComposeResult</span><span class="p">)</span><span class="n">result</span> <span class="p">{</span>
</span><span class='line'>
</span><span class='line'>      <span class="k">switch</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span class='line'>      <span class="p">{</span>
</span><span class='line'>          <span class="k">case</span> <span class="nl">MessageComposeResultCancelled:</span>
</span><span class='line'>              <span class="n">LOG_EXPR</span><span class="p">(</span><span class="s">@&quot;Result: SMS sending canceled&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="k">break</span><span class="p">;</span>
</span><span class='line'>          <span class="k">case</span> <span class="nl">MessageComposeResultSent:</span>
</span><span class='line'>              <span class="n">LOG_EXPR</span><span class="p">(</span><span class="s">@&quot;Result: SMS sent&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="k">break</span><span class="p">;</span>
</span><span class='line'>          <span class="k">case</span> <span class="nl">MessageComposeResultFailed:</span>
</span><span class='line'>              <span class="p">[</span><span class="n">UIAlertView</span> <span class="nl">quickAlertWithTitle:</span><span class="s">@&quot;短信发送失败&quot;</span> <span class="nl">messageTitle:</span><span class="nb">nil</span> <span class="nl">dismissTitle:</span><span class="s">@&quot;关闭&quot;</span><span class="p">];</span>
</span><span class='line'>              <span class="k">break</span><span class="p">;</span>
</span><span class='line'>          <span class="k">default</span><span class="o">:</span>
</span><span class='line'>              <span class="n">LOG_EXPR</span><span class="p">(</span><span class="s">@&quot;Result: SMS not sent&quot;</span><span class="p">);</span>
</span><span class='line'>              <span class="k">break</span><span class="p">;</span>
</span><span class='line'>      <span class="p">}</span>
</span><span class='line'>      <span class="p">[</span><span class="n">self</span> <span class="nl">dismissModalViewControllerAnimated:</span><span class="n">YES</span><span class="p">];</span>
</span><span class='line'>    <span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>



<p><a rel="bookmark" href="http://luosky.github.com/2011/01/04/ios-in-app-sms/">&#9875; Permalink</a></p>]]></content>
    </entry>
  
    <entry>
      




<title type="html"><![CDATA[我是同步控]]></title>
<link href="http://luosky.github.com/2011/01/01/my-sync-solution/"/>
<updated>2011-01-01T00:36:00+08:00</updated>
<id>http://luosky.github.com/2011/01/01/my-sync-solution</id>

      <content type="html"><![CDATA[<p>我的同步方案：</p>

<p>同步照片：</p>

<ul>
<li><p>instagram</p>

<ul>
<li>twitter</li>
<li>facebook</li>
<li><p>flickr</p>

<ul>
<li><p>wordpress(via <a href="http://devthought.com/wp-o-matic-the-wordpress-rss-agreggator/">WP-o-Matic</a>)</p>

<ul>
<li>qzone （via <a href="http://liguoliang.com/2010/wordpress-post-to-qzone/">post2Qzone</a>）</li>
<li><a href="http://renjian.com/">renjian.com</a>(via <a href="http://www.smyx.net/wp-connect.html">WordPress连接微博</a>)</li>
<li>sina微博(via <a href="http://www.smyx.net/wp-connect.html">WordPress连接微博</a>)</li>
<li><p>digu (via <a href="http://www.smyx.net/wp-connect.html">WordPress连接微博</a>)</p>

<ul>
<li>kaixin001（via 嘀神）</li>
<li>douban（via 嘀神）</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<p>同步微薄：</p>

<ul>
<li><p>qq签名</p>

<ul>
<li><p>follow5</p>

<ul>
<li>sina微博</li>
<li>twitter</li>
<li><p>digu</p>

<ul>
<li>kaixin001（via 嘀神）</li>
<li>douban (via 嘀神)</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>


<p>2011-04-09 updated: 图片同步方式中换用<a href="http://www.smyx.net/wp-connect.html">WordPress连接微博</a> 来同步到几个微博</p>
<p><a rel="bookmark" href="http://luosky.github.com/2011/01/01/my-sync-solution/">&#9875; Permalink</a></p>]]></content>
    </entry>
  
    <entry>
      




<title type="html"><![CDATA[iOS Notification 学习笔记]]></title>
<link href="http://luosky.github.com/2010/10/31/ios-notification-study-note/"/>
<updated>2010-10-31T00:17:00+08:00</updated>
<id>http://luosky.github.com/2010/10/31/ios-notification-study-note</id>

      <content type="html"><![CDATA[<h2>分类</h2>

<ol>
<li><p>本地notification</p>

<ul>
<li>4.0才开始支持</li>
<li>无需网络,无需走和Apple推送服务器的整个推送流程,一切都在本地发生</li>
</ul>
</li>
<li><p>push notification</p>

<ul>
<li>3.0开始支持</li>
<li>对于因为网络原因未发送到用户手机上的notification ,APNs会保留起来,待该device联网后发送.但对每台机器的每个应用只会保留一条,后来的覆盖之前的.</li>
<li>payload大小不超过256byte</li>
<li><strong>每次应用程序启动</strong>时都需向APNs注册,获得device token后将其传回应用的provider(application的server端)</li>
<li>provider要发送notification时,需附带这个device token</li>
<li>APNs会反馈持续发送失败的device 列表给provider,provider应停止向这些device发送notification</li>
<li>icon budge上显示的数字就是provider发过来的数字,不会累加.</li>
</ul>
</li>
</ol>


<h2>接收到notification时的处理</h2>

<p>本地notification和push notification对用户来讲没什么不同,当用户接收到一个notification时:</p>

<ul>
<li>若应用在后台运行,或者没有运行时

<ul>
<li>展现这个notification(提醒,声音和icon badge).若用户点了这个提醒(或是划动解锁了屏幕),则以notification带的payload作为参数调用<code>application:didFinishLaunchingWithOptions:</code>方法启动应用</li>
</ul>
</li>
<li>若正在前台运行

<ul>
<li>若是push notification,则<code>application:didReceiveRemoteNotification:</code>被调用</li>
<li>若是本地的notification,则 <code>application:didReceiveLocalNotification:</code> 会被调用</li>
</ul>
</li>
</ul>


<h2>建立推送服务器</h2>

<p>要发送notification的provider需先获取SSL证书.一个证书只能用于一个应用.且有测试(sandbox)证书和正式证书之分:</p>

<ul>
<li>测试(sandbox):<a href="http://gateway.sandbox.push.apple.com">gateway.sandbox.push.apple.com</a>, outbound TCP port 2195.</li>
<li>正式:<a href="http://gateway.push.apple.com">gateway.push.apple.com</a>, outbound TCP port 2195.</li>
</ul>


<p>iOS Develop Program的用户有三种角色:</p>

<ol>
<li>team agent</li>
<li>team admin</li>
<li>team member.</li>
</ol>


<p>只有team agent可以创建SSL证书<br/>
team agent 和team admin可以创建provisioning profile<br/>
team member只能下载和安装证书及profile</p>
<p><a rel="bookmark" href="http://luosky.github.com/2010/10/31/ios-notification-study-note/">&#9875; Permalink</a></p>]]></content>
    </entry>
  
</feed>
